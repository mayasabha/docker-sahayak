<script type="text/javascript">
    RED.nodes.registerType('docker-compose-service', {
        category: 'Docker Compose',
        color: '#31A6FF',
        defaults: {
            name: {
                value: 'new_service',
            },
            ports: {
                value: '80:80,8080:8080',
            },
            container_name: {
                value: 'new_service_container',
            },
            image: {
                value: 'new_service_image',
            },
            build_context: {
                value: null,
            },
            build_dockerfile: {
                value: null,
            },
            networks: {
                value: 'new_network1,new_network2',
            },
        },
        inputs: 1,
        outputs: 1,
        icon: "font-awesome/fa-server",
        label: function () {
            return this.name || 'Add Service';
        },
        paletteLabel: 'Add Service',
        oneditprepare: function () {
            var node = this;
        },
        oneditsave: function () {
        },
        oneditcancel: function () {
        }
    });
</script>

<script type="text/html" data-template-name="docker-compose-service">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Service Name</label>
        <input type="text" id="node-input-name" placeholder="Service Name">
    </div>
    <div class="form-row">
        <label for="node-input-ports"><i class="fa fa-sitemap"></i> Ports</label>
        <input type="text" id="node-input-ports" placeholder="Ports">
    </div>
    <div class="form-row">
        <label for="node-input-container_name"><i class="fa fa-tag"></i> Container Name</label>
        <input type="text" id="node-input-container_name" placeholder="Container Name">
    </div>
    <div class="form-row">
        <label for="node-input-image"><i class="fa fa-floppy"></i> Image Name</label>
        <input type="text" id="node-input-image" placeholder="Container Name">
    </div>
    <div class="form-row">
        <label for="node-input-build_context"><i class="fa fa-folder"></i> Build Context</label>
        <input type="text" id="node-input-build_context" placeholder="Build Context">
    </div>
    <div class="form-row">
        <label for="node-input-build_dockerfile"><i class="fa fa-file"></i> Build Dockerfile</label>
        <input type="text" id="node-input-build_dockerfile" placeholder="Build Dockerfile">
    </div>
    <div class="form-row">
        <label for="node-input-networks"><i class="fa fa-sitemap"></i> Networks</label>
        <input type="text" id="node-input-networks" placeholder="Networks">
    </div>
</script>

<script type="text/html" data-help-name="docker-compose-service">
    <p>This node allows you to add a service to the Docker Compose file. It provides the following options:</p>
    <ul>
        <li>Service Name: This is the name used for the service for Docker Compose</li>
        <li>Ports: This is the comma-separated values of ports that need to be mapped to the service. An example port mapping would be <code>80:80,8080:8081</code>, where the host port <code>80</code> is mapped to container port <code>80</code> and the host port <code>8080</code> is mapped to container port <code>8081</code>.</li>
        <li>Container Name: This is the name to be given to the container that runs this service. This name is the hostname that can be used by other containers on the network to access this container.</li>
        <li>Image Name: This is the name of the image which is to be pulled, if building from an existing image, or the name of the new image that is created using the build step, if a custom image is being built for this service.</li>
        <li>Build Context: This is the <code>context</code> or directory in which the build step is to be performed for custom images that are built for the service. A sample path would be <code>./</code> which would refer to the current directory.</li>
        <li>Build Dockerfile: This is the name of the <code>Dockerfile</code> which is to be used while performing the build step for a custom image for this service. A sample dockerfile would be <code>Dockerfile</code> which would refer to a file by the name, "Dockerfile" in the Build Context directory.</li>
        <li>Networks: This is the comma-separated list of networks that the container for the service should connect to. An example list of networks is <code>sample_network1,sample_network2</code>, which would register the container for this service on two networks, <code>sample_network1</code> and <code>sample_network2</code>. Note: You must ensure these networks are either specified in the Docker Compose file being created, either as networks from this file itself or as external references.</li>
    </ul>
</script>